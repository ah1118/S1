<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.min.js"></script>
</head>

<body>

<input type="file" id="pdfInput" accept="application/pdf" />
<button onclick="processPDF()">Read PDF</button>
<textarea id="resultBox" style="width:100%;height:400px;"></textarea>

<script>
// PDF.js Worker
pdfjsLib.GlobalWorkerOptions.workerSrc =
    "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js";


// -------------------------
// READ PDF FULLY (Raw Dump)
// -------------------------
async function readWholePDF(file) {
    const pdf = await pdfjsLib.getDocument(URL.createObjectURL(file)).promise;
    let fullText = "";

    for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);
        const content = await page.getTextContent();

        // Each item is a text piece on the PDF
        const pageText = content.items.map(i => i.str).join(" ");

        fullText += "=== PAGE " + i + " ===\n";
        fullText += pageText + "\n\n";
    }

    return fullText;
}


// -------------------------
// MAIN BUTTON ACTION
// -------------------------
async function processPDF() {
    const file = document.getElementById("pdfInput").files[0];
    if (!file) {
        alert("Select a PDF first!");
        return;
    }

    let rawText = await readWholePDF(file);

    document.getElementById("resultBox").value = rawText;
}
</script>

</body>
</html>
